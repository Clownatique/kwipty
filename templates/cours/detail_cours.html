{% extends 'index.html' %}
{% block title %} {{nomMatiere}}{% endblock title %}
{% load static %}
{% block css %}{% static 'compte/dashboard.css' %}{% endblock css %}
{% block content %}
<menu>
    <div id="{{ categorie.0.categorie_enseignement }}_bloc" href="{% url 'dashboard' %}" class="liste-matiere">
        <a href="{% url 'affichermatieredetail' matiere|slugify matiere.id %}"><b class="intitule">{{ matiere }}</b></a>
    </div>
    {% for cours in liste_cours %}
    <li class="bloc_cours">
    <a href="{% url 'affichercoursdetail' matiere.id matiere|slugify cours.titre %}"><b class="intitule">{{ cours.titre }}</b></a>
    </li>
    {% endfor %}
    </div>
    <div class="options-fixes additional-options">
        <img src="info.png">
        <div>
            <p> Bonjour, {{request.user.prenom}}</p>
            <p href="{% url 'logout' %}"> Se déconnecter </p>
        </div>
        <p> Réglage </p>
    </div>
</menu>
<div class="contenu">
    <div class="info cours">
        <div class="intitule">
            <h1> {{ cours.titre }} </h1>
            {% if cours.problematique is None %}
            <p>Pas besoin de problèmatique dans ce cours!!</p>
            {% else %}
            <p>Problématique: {{ cours.problematique }}</p>
            {% endif %}
        </div>
        <div class="stats">
            <p>Nombre de cartes:  {{cartes|length}}</p>
            <a href=""><p>Documents associés</p></a>
            <p>Mis en ligne le : {{ cours.date|default_if_none:"non spécifié"}} </p>
            <p>Difficulté : {{cours.difficulte|default_if_none:"non calculé"}}</p>
        </div>
    </div>
    <div class="info cartes">
        <div class="progression">
            <a><img src="../media/icones/icone_carte.png.png" sizes="3"></a>
            <progress max="{{cartes|length}}" value="{{nombre_cartes_apprises}}"></progress>
        </div>
        <div class="info_revision">
            <li class="liste_cours">
                {% for tag, count in tag_counts.items %}
                <a>
                    {% if count == 1 %}
                        {{ count }} {{ tag }}
                    {% else %}
                        {{ count }} {{ tag}}{{ tag | pluralize:'s' }}
                    {% endif %}
                </a>
                {% endfor %}
            </li>
        </div>
        {% if cartes is not None %}
        <a class="reviser" href="{% url 'reviser_cartes' revision_instance.id %}">
            <button>
                Réviser les cartes!!
            </button>
        </a>
        {% else %}
        <a class="reviser">
            <button>
                pas encore de cartes disponibles
            </button>
        </a>
        {% endif %}
    </div>
    <div class="info">
        <ul class="exercices">
            {% if exercices|length is 0 %}
            pas d'exo mdr
            {% else %}
            {% for exercice in exercices %}
            <li class="exo">
                <a href="{% url 'unourien' session exercice.titre|slugify %}">
                <p>{{ exercice.titre|default:"Default Title" }}</p>
                <img src="{{exercice.illustration.path|default_if_none:'../static/cours/default.png'}}">
                </a>
            </li>
            {% endfor %}
            {% endif %}
        </ul>
    </div>
</div>
{% endblock content %}